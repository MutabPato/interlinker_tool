{% extends 'interlinker/base.html' %}

{% block title %}Interlinked HTML Preview | Interlinker{% endblock %}
{% block meta_description %}Review the HTML generated by Interlinker, preview the anchor placement, and copy the output directly into your CMS.{% endblock %}

{% block content %}
<section class="section narrow">
    <header class="section-header">
        <h1>Interlinked content</h1>
        <p>Preview the enriched article, copy production-ready HTML, and review the internal links we added.</p>
    </header>

    <div class="result-panels">
        <div class="result-preview" aria-labelledby="preview-heading">
            <h2 id="preview-heading">Preview</h2>
            <div class="preview" role="region" aria-live="polite">
                {{ linked_html|safe }}
            </div>
        </div>
        <div class="result-code" aria-labelledby="html-heading">
            <h2 id="html-heading">HTML output</h2>
            <textarea rows="18" readonly aria-describedby="html-help">{{ linked_html }}</textarea>
            <p id="html-help" class="small">Copy and paste this HTML directly into your publishing platform.</p>
        </div>
    </div>

    {% if inserted %}
        <section class="inserted-links" aria-labelledby="inserted-heading">
            <h2 id="inserted-heading">Inserted links ({{ inserted|length }})</h2>
            <ul>
                {% for slug, url in inserted %}
                    <li><code>{{ slug }}</code> â†’ <a href="{{ url }}" target="_blank" rel="noopener">{{ url }}</a></li>
                {% endfor %}
            </ul>
        </section>
    {% endif %}

    <p><a class="link-more" href="{% url 'interlinker:interlink' %}">Back to interlink form</a></p>
</section>
{% endblock %}
